"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function $$(e,t,o){var r=(t="function"!=typeof t?t||document:(o=t,document)).querySelectorAll(e),r=Array.prototype.slice.call(t.querySelectorAll(e));return"function"==typeof o&&r.forEach(function(e,t,r){o(e,t,r)}),r}function h_el(e){return!!(Array.isArray(e)&&0<e.length)}function debugging(){[].forEach.call($$("*"),function(e){e.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16)})}function scrollToNextBlock(e){var t=e.buttonSelector,r=e.nextBlockSelector;$$(t)[0].addEventListener("click",function(){window.scrollTo({top:$$(r)[0].offsetTop,behavior:"smooth"})})}function initSlider(){new Swiper(".benefits__slider",{slidesPerView:3,loop:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function resetPopups(){$$(".popup",function(e){e.classList.contains("popup-enabled")&&(e.classList.remove("popup-enabled"),e.classList.add("popup-disabled"))})}function openPopup(e){resetPopups(),$$(e)[0].classList.contains("popup-disabled")&&$$(e)[0].classList.remove("popup-disabled"),$$(e)[0].classList.add("popup-enabled")}function onButtonClickOpenPopup(){$$(".popup_open",function(e){return e.addEventListener("click",function(){return openPopup(".popup_form")})})}function closePopup(){$$(".popup__close",function(e){return e.addEventListener("click",function(){e.closest(".popup").classList.add("popup-disabled"),setTimeout(function(){e.closest(".popup").classList.remove("popup-enabled")},200)})})}Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var n=Object.keys(Object(o)),a=0,i=n.length;a<i;a++){var l=n[a],s=Object.getOwnPropertyDescriptor(o,l);void 0!==s&&s.enumerable&&(t[l]=o[l])}}return t}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var validateEmail=function(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},validatePhone=function(e){return String(e).toLowerCase().match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)};function checkFieldErrors(e){var t=e.input,r=e.value,o=e.fieldName,e=t.closest("label"),t=!1;if(console.log("value:",r,o),""===r)t=!0,e.classList.contains("error")||e.classList.add("error");else if("email"===o){if(validateEmail(r)?e.classList.contains("error")&&e.classList.remove("error"):e.classList.contains("error")||e.classList.add("error"),!0===(t=e.classList.contains("error")))return t}else if("phone"===o){if(validatePhone(r)?e.classList.contains("error")&&e.classList.remove("error"):e.classList.contains("error")||e.classList.add("error"),!0===(t=e.classList.contains("error")))return t}else t=!1,e.classList.contains("error")&&e.classList.remove("error");return t}function checkFormValidation(e){return Object.entries(e).forEach(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];"price"!==e&&checkFieldErrors({input:document.getElementsByName(e)[0],value:t,fieldName:e})}),Object.entries(e).every(function(e){var t=_slicedToArray(e,2),e=t[0],t=t[1];return"price"===e||!0==!checkFieldErrors({input:document.getElementsByName(e)[0],value:t,fieldName:e})})}function onInput(){$$("input",function(t){t.addEventListener("input",function(e){checkFieldErrors({input:t,value:e.target.value,fieldName:e.target.name})})}),$$("select",function(t){t.addEventListener("change",function(e){checkFieldErrors({input:t,value:e.target.value,fieldName:e.target.name})})})}function selectsCheck(){var e=_slicedToArray($$(".form__select"),2),t=e[0],r=e[1],o=t.value,n=r.value,a=$$(".form__priceInput")[0],i=$$(".form__price span")[0];t.addEventListener("change",function(e){""!==r.value&&(Number(t.value)>=Number(r.value)?t.value=o:(a.value=Number(a.dataset.price)*(Number(r.value)-Number(t.value)),i.innerText=a.value+"$",o=t.value))}),r.addEventListener("change",function(e){Number(t.value)>=Number(r.value)&&(r.value=n),a.value=Number(a.dataset.price)*(Number(r.value)-Number(t.value)),i.innerText=a.value+"$",n=r.value})}function getFormData(){var e=$$(".form")[0],t=new FormData(e),r=_slicedToArray($$(".form__select"),2),e=r[0],r=r[1];return t.append("timeFrom",e.value),t.append("timeTo",r.value),Object.fromEntries(t)}function sendFormData(){$$(".form__button")[0].addEventListener("click",function(){var e=getFormData();!0===checkFormValidation(e)&&fetch("send.php",{method:"POST",body:JSON.stringify({data:e})}).then(function(e){"success"===e.status?openPopup(".popup_success"):"error"===e.status&&openPopup(".popup_error")})})}onInput(),selectsCheck(),sendFormData(),onButtonClickOpenPopup(),closePopup(),initSlider(),scrollToNextBlock({buttonSelector:".about__more",nextBlockSelector:".offer"});